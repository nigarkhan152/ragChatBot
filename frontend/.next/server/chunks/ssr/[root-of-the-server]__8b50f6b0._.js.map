{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/frontend/src/app/upload/%5Busername%5D/page.js"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function UploadPage() {\n  const [file, setFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const token = localStorage.getItem(\"token\");\n\n    if (!token || !user) {\n      router.push(\"/login\");\n    }else{\n      setUser(user);\n      setToken(token);\n    } \n  }, []);\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n    setMessage(\"\");\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      setMessage(\"⚠️ Please choose a file first!\");\n      return;\n    }\n\n    setUploading(true);\n    setMessage(\"\");\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const res = await fetch(`http://localhost:8000/upload/${user.username}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },      \n        body: formData,\n      });\n\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.detail || \"Upload failed\");\n      if (data.status === \"success\") {\n        setMessage(`✅ Uploaded: ${data.filename || file.name}. ${data.message || \"\"}`);\n      } else {\n        setMessage(\"❌ Upload failed. \" + (data.detail || \"\"));\n      }\n\n    } catch (err) {\n      console.error(err);\n      setMessage(\"❌ Upload failed. Check server logs.\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"token\");\n    router.push(\"/\");\n  };\n  return (\n    <div className=\"min-h-screen bg-black text-white flex flex-col items-center relative\">\n      {/* Navigation bar */}\n      <div className=\"w-full max-w-5xl flex justify-between items-center absolute top-12 px-6\">\n        <div></div> {/* Spacer */}\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-purple-400  text-center\">\n          ChatBot File Upload\n        </h1>\n        <button\n          onClick={handleLogout}\n          className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded shadow-lg transition duration-200\"\n        >\n          Logout\n        </button>\n      </div>\n  \n      {/* Upload form */}\n      <div className=\"w-full max-w-md bg-gray-900 p-8 rounded-3xl mt-48 shadow-lg flex flex-col items-center\">\n        <h2 className=\"text-3xl font-semibold text-purple-300 mb-6\">Upload Document</h2>\n  \n        <label className=\"w-full flex items-center justify-center px-6 py-3 mb-4 bg-gray-800 text-gray-300 rounded-xl cursor-pointer hover:bg-gray-700 border border-gray-600 transition duration-200\">\n          Choose File\n          <input\n            type=\"file\"\n            onChange={handleFileChange}\n            className=\"hidden\"\n          />\n        </label>\n  \n        <button\n          onClick={handleUpload}\n          disabled={uploading}\n          className=\"w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-xl text-white mb-3 shadow-md disabled:opacity-60 transition duration-200\"\n        >\n          {uploading ? \"Uploading...\" : \"Upload\"}\n        </button>\n  \n        {message && (\n          <div className=\"w-full text-center p-3 rounded-lg bg-gray-800 mt-2 text-purple-200\">\n            {message}\n          </div>\n        )}\n  \n        {user && (\n          <button\n            onClick={() => router.push(`/ask/${user.username}`)}\n            className=\"w-full bg-green-600 hover:bg-green-700 py-3 rounded-xl text-white mt-6 shadow-md transition duration-200\"\n          >\n            Go to Ask Page\n          </button>\n        )}\n      </div>\n    </div>\n  );\n  \n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAAC,EAAE;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,2JAAS;IAExB,IAAA,8NAAS,EAAC;QACR,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC;QAC7C,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,CAAC,SAAS,CAAC,MAAM;YACnB,OAAO,IAAI,CAAC;QACd,OAAK;YACH,QAAQ;YACR,SAAS;QACX;IACF,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAC;QACxB,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QACzB,WAAW;IACb;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;YACT,WAAW;YACX;QACF;QAEA,aAAa;QACb,WAAW;QAEX,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QAExB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,6BAA6B,EAAE,KAAK,QAAQ,EAAE,EAAE;gBACvE,QAAQ;gBACR,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM;YACR;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,MAAM,IAAI;YAC5C,IAAI,KAAK,MAAM,KAAK,WAAW;gBAC7B,WAAW,CAAC,YAAY,EAAE,KAAK,QAAQ,IAAI,KAAK,IAAI,CAAC,EAAE,EAAE,KAAK,OAAO,IAAI,IAAI;YAC/E,OAAO;gBACL,WAAW,sBAAsB,CAAC,KAAK,MAAM,IAAI,EAAE;YACrD;QAEF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,WAAW;QACb,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IACA,qBACE,0PAAC;QAAI,WAAU;;0BAEb,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;;;;;oBAAU;kCACX,0PAAC;wBAAG,WAAU;kCAAmE;;;;;;kCAGjF,0PAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAMH,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAE5D,0PAAC;wBAAM,WAAU;;4BAA8K;0CAE7L,0PAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;;;;;;;;;;;;kCAId,0PAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAET,YAAY,iBAAiB;;;;;;oBAG/B,yBACC,0PAAC;wBAAI,WAAU;kCACZ;;;;;;oBAIJ,sBACC,0PAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,QAAQ,EAAE;wBAClD,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAQX","debugId":null}}]
}