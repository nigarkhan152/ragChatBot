{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/frontend/src/app/chat/page.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport default function ChatPage() {\n  const [user, setUser] = useState(null);\n  const [sessionId] = useState(() => uuidv4());\n  const [chatHistory, setChatHistory] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // Get user info from localStorage\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    } else {\n      window.location.href = \"/login\"; // redirect if not logged in\n    }\n  }, []);\n\n  // Fetch chat history after user is set\n  useEffect(() => {\n    if (!user) return;\n\n    fetch(`http://localhost:8000/get_chats/${user.user_id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        // Optional: sort by timestamp\n        const sorted = data.sort(\n          (a, b) => new Date(a.timestamp) - new Date(b.timestamp)\n        );\n        setChatHistory(sorted);\n      })\n      .catch((err) => console.error(\"Failed to fetch chat history\", err));\n  }, [user]);\n\n  const handleSend = async () => {\n    if (!message.trim()) return;\n    setLoading(true);\n\n    // Simulate bot response (replace with LangChain API call if needed)\n    const botResponse = `Echo: ${message}`;\n\n    const chatPayload = {\n      user_id: user.user_id,\n      session_id: sessionId,\n      user_message: message,\n      bot_response: botResponse,\n    };\n\n    try {\n      const res = await fetch(\"http://localhost:8000/save_chat/\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(chatPayload),\n      });\n\n      if (!res.ok) throw new Error(\"Failed to save message\");\n\n      // Add new message to chat UI immediately\n      setChatHistory((prev) => [...prev, { ...chatPayload }]);\n      setMessage(\"\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to send message\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white flex flex-col items-center p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">Chat with Bot</h1>\n\n      <div className=\"w-full max-w-2xl bg-gray-900 rounded-xl p-4 overflow-y-auto h-[400px] mb-4 shadow-lg\">\n        {chatHistory.map((chat, index) => (\n          <div key={index} className=\"mb-4\">\n            <div className=\"text-purple-400 font-semibold\">You:</div>\n            <div className=\"mb-2\">{chat.user_message}</div>\n            <div className=\"text-green-400 font-semibold\">Bot:</div>\n            <div>{chat.bot_response}</div>\n            <hr className=\"my-2 border-gray-700\" />\n          </div>\n        ))}\n      </div>\n\n      <div className=\"w-full max-w-2xl flex space-x-2\">\n        <input\n          type=\"text\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          className=\"flex-1 px-4 py-2 rounded-lg bg-black border border-purple-500 text-white focus:outline-none focus:ring-2 focus:ring-purple-400\"\n          placeholder=\"Type your message...\"\n        />\n        <button\n          onClick={handleSend}\n          disabled={loading}\n          className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg disabled:opacity-50\"\n        >\n          {loading ? \"Sending...\" : \"Send\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,GAAG,IAAA,6NAAQ,EAAC,IAAM,IAAA,iLAAM;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAAC,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IAEvC,kCAAkC;IAClC,IAAA,8NAAS,EAAC;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,QAAQ,KAAK,KAAK,CAAC;QACrB,OAAO;YACL,OAAO,QAAQ,CAAC,IAAI,GAAG,UAAU,4BAA4B;QAC/D;IACF,GAAG,EAAE;IAEL,uCAAuC;IACvC,IAAA,8NAAS,EAAC;QACR,IAAI,CAAC,MAAM;QAEX,MAAM,CAAC,gCAAgC,EAAE,KAAK,OAAO,EAAE,EACpD,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,8BAA8B;YAC9B,MAAM,SAAS,KAAK,IAAI,CACtB,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;YAExD,eAAe;QACjB,GACC,KAAK,CAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC,gCAAgC;IAClE,GAAG;QAAC;KAAK;IAET,MAAM,aAAa;QACjB,IAAI,CAAC,QAAQ,IAAI,IAAI;QACrB,WAAW;QAEX,oEAAoE;QACpE,MAAM,cAAc,CAAC,MAAM,EAAE,SAAS;QAEtC,MAAM,cAAc;YAClB,SAAS,KAAK,OAAO;YACrB,YAAY;YACZ,cAAc;YACd,cAAc;QAChB;QAEA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,oCAAoC;gBAC1D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,yCAAyC;YACzC,eAAe,CAAC,OAAS;uBAAI;oBAAM;wBAAE,GAAG,WAAW;oBAAC;iBAAE;YACtD,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,0PAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,MAAM,sBACtB,0PAAC;wBAAgB,WAAU;;0CACzB,0PAAC;gCAAI,WAAU;0CAAgC;;;;;;0CAC/C,0PAAC;gCAAI,WAAU;0CAAQ,KAAK,YAAY;;;;;;0CACxC,0PAAC;gCAAI,WAAU;0CAA+B;;;;;;0CAC9C,0PAAC;0CAAK,KAAK,YAAY;;;;;;0CACvB,0PAAC;gCAAG,WAAU;;;;;;;uBALN;;;;;;;;;;0BAUd,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC1C,WAAU;wBACV,aAAY;;;;;;kCAEd,0PAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAET,UAAU,eAAe;;;;;;;;;;;;;;;;;;AAKpC","debugId":null}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,qIACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,qIACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/native.js"],"sourcesContent":["import { randomUUID } from 'node:crypto';\nexport default { randomUUID };\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,YAAA,mIAAU;AAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/rng.js"],"sourcesContent":["import { randomFillSync } from 'node:crypto';\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,YAAY,IAAI,WAAW;AACjC,IAAI,UAAU,UAAU,MAAM;AACf,SAAS;IACpB,IAAI,UAAU,UAAU,MAAM,GAAG,IAAI;QACjC,IAAA,uIAAc,EAAC;QACf,UAAU;IACd;IACA,OAAO,UAAU,KAAK,CAAC,SAAU,WAAW;AAChD","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/regex.js"],"sourcesContent":["export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n"],"names":[],"mappings":";;;;uCAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/validate.js"],"sourcesContent":["import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n"],"names":[],"mappings":";;;;AAAA;;AACA,SAAS,SAAS,IAAI;IAClB,OAAO,OAAO,SAAS,YAAY,wJAAK,CAAC,IAAI,CAAC;AAClD;uCACe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/stringify.js"],"sourcesContent":["import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,YAAY,EAAE;AACpB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG;IAC1B,UAAU,IAAI,CAAC,CAAC,IAAI,KAAK,EAAE,QAAQ,CAAC,IAAI,KAAK,CAAC;AAClD;AACO,SAAS,gBAAgB,GAAG,EAAE,SAAS,CAAC;IAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC9B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,WAAW;AAChD;AACA,SAAS,UAAU,GAAG,EAAE,SAAS,CAAC;IAC9B,MAAM,OAAO,gBAAgB,KAAK;IAClC,IAAI,CAAC,IAAA,2JAAQ,EAAC,OAAO;QACjB,MAAM,UAAU;IACpB;IACA,OAAO;AACX;uCACe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///Users/administrator/Desktop/langbot/node_modules/uuid/dist-node/v4.js"],"sourcesContent":["import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACA,SAAS,IAAI,OAAO,EAAE,GAAG,EAAE,MAAM;IAC7B,UAAU,WAAW,CAAC;IACtB,MAAM,OAAO,QAAQ,MAAM,IAAI,QAAQ,GAAG,QAAQ,IAAA,sJAAG;IACrD,IAAI,KAAK,MAAM,GAAG,IAAI;QAClB,MAAM,IAAI,MAAM;IACpB;IACA,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,KAAK;QACL,SAAS,UAAU;QACnB,IAAI,SAAS,KAAK,SAAS,KAAK,IAAI,MAAM,EAAE;YACxC,MAAM,IAAI,WAAW,CAAC,gBAAgB,EAAE,OAAO,CAAC,EAAE,SAAS,GAAG,wBAAwB,CAAC;QAC3F;QACA,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,EAAG;YACzB,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,EAAE;QAC7B;QACA,OAAO;IACX;IACA,OAAO,IAAA,oKAAe,EAAC;AAC3B;AACA,SAAS,GAAG,OAAO,EAAE,GAAG,EAAE,MAAM;IAC5B,IAAI,yJAAM,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,SAAS;QACvC,OAAO,yJAAM,CAAC,UAAU;IAC5B;IACA,OAAO,IAAI,SAAS,KAAK;AAC7B;uCACe","ignoreList":[0],"debugId":null}}]
}