{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/internal-training-2025-nigar/frontend/src/app/login/page.js"],"sourcesContent":["\"use client\";\nimport { useState ,useEffect} from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { FcGoogle } from \"react-icons/fc\";\n\nexport default function LoginPage() {\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [loggedInUser, setLoggedInUser] = useState(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      setLoggedInUser(JSON.parse(user));\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };   \n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"http://localhost:8000/api/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) throw new Error(data.detail || \"Login failed\");\n\n      // ✅ Save token and user in localStorage\n      localStorage.setItem(\"token\", data.access_token);\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\n      const username = data.user.username;\n      alert(\"Login successful!\");\n      router.push(`/upload/${username}`);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleGoogleLogin = () => {\n    window.location.href = \"http://localhost:8000/login/google\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      {/* ✅ Navigation bar */}\n      <div className=\"w-full flex justify-between items-center px-6 py-4 bg-gray-900 border-b border-gray-700\">\n        <h1\n          // onClick={() => router.push(\"/\")}\n          className=\"text-xl font-bold text-purple-400 cursor-pointer\"\n        >\n          ChatBot\n        </h1>\n        <div className=\"space-x-4\">\n          <button\n            onClick={() => router.push(\"/\")}\n            className=\"px-4 py-2 rounded bg-gray-800 hover:bg-gray-700 text-purple-300\"\n          >\n            Home\n          </button>\n          {loggedInUser && (\n            <button\n              onClick={() => router.push(`/ask/${loggedInUser.username}`)}\n              className=\"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white\"\n            >\n              Go to Ask\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* ✅ Login form */}\n      <div className=\"flex items-center justify-center min-h-[80vh] px-4\">\n        <div className=\"bg-gray-900 p-8 rounded-2xl shadow-lg w-full max-w-md\">\n          <h2 className=\"text-2xl font-bold text-purple-400 text-center mb-6\">\n            Login to Your Account\n          </h2>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Email</label>\n              <input\n                type=\"email\"\n                name=\"email\"\n                value={form.email}\n                onChange={handleChange}\n                required\n                className=\"w-full px-4 py-2 rounded-lg bg-black border border-purple-500 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-gray-300 mb-1\">Password</label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={form.password}\n                onChange={handleChange}\n                required\n                className=\"w-full px-4 py-2 rounded-lg bg-black border border-purple-500 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 transition disabled:opacity-50\"\n            >\n              {loading ? \"Logging in...\" : \"Login\"}\n            </button>\n          </form>\n          {/* ✅ Google Button */}\n          <div className=\"mt-6\">\n            <button\n              onClick={handleGoogleLogin}\n              className=\"w-full flex items-center justify-center space-x-3 py-3 px-4 rounded-lg bg-white text-gray-700 font-semibold hover:bg-gray-100 transition\"\n            >\n              <FcGoogle className=\"w-6 h-6\" />\n              <span>Continue with Google</span>\n            </button>\n          </div>\n          {error && (\n            <p className=\"text-red-500 text-sm text-center mt-4\">{error}</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}